╔══════════════════════════════════════════════════════╗
║      Phase 3: LP Provision                           ║
╚══════════════════════════════════════════════════════╝

0. Computing Condition ID...
   Computed Condition ID: 0xd9116a0d7566d8c6d1e5914fcc328bdf0db42a4c1b9a4d7c9ccf1ebbbb66e3d5

1. Minting USDC to LP...
   LP USDC balance: 3000 USDC

2. LP approving CTF to spend USDC...
   ✅ Approved

2.5. Checking if Condition is prepared...
   ✅ Condition already prepared

3. Splitting position into YES/NO tokens...
   ConditionId: 0xd9116a0d7566d8c6d1e5914fcc328bdf0db42a4c1b9a4d7c9ccf1ebbbb66e3d5
   Amount: 1000 USDC
   ❌ Split Position failed: ContractFunctionExecutionError: Execution reverted with reason: Out of gas: gas required exceeds allowance: 30000000.

Request Arguments:
  from:  0x70997970C51812dc3A010C7d01b50e0d17dc79C8
  to:    0x610178dA211FEF7D417bC0e6FeD39F05609AD788
  data:  0x72ce42750000000000000000000000002279b7a0a67db372996a5fab50d91eaa73d2ebe60000000000000000000000000000000000000000000000000000000000000000d9116a0d7566d8c6d1e5914fcc328bdf0db42a4c1b9a4d7c9ccf1ebbbb66e3d500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000003b9aca00000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002
 
Contract Call:
  address:   0x610178dA211FEF7D417bC0e6FeD39F05609AD788
  function:  splitPosition(address collateralToken, bytes32 parentCollectionId, bytes32 conditionId, uint256[] partition, uint256 amount)
  args:                   (0x2279B7A0a67DB372996a5FaB50D91eAA73d2eBe6, 0x0000000000000000000000000000000000000000000000000000000000000000, 0xd9116a0d7566d8c6d1e5914fcc328bdf0db42a4c1b9a4d7c9ccf1ebbbb66e3d5, ["1","2"], 1000000000)
  sender:    0x70997970C51812dc3A010C7d01b50e0d17dc79C8

Docs: https://viem.sh/docs/contract/writeContract
Details: Out of gas: gas required exceeds allowance: 30000000
Version: viem@2.45.1
    at getContractError (/Users/sanchaymittal/github/polybook/orchestrator/node_modules/.pnpm/viem@2.45.1_typescript@5.9.3/node_modules/viem/utils/errors/getContractError.ts:81:10)
    at writeContract.internal (/Users/sanchaymittal/github/polybook/orchestrator/node_modules/.pnpm/viem@2.45.1_typescript@5.9.3/node_modules/viem/actions/wallet/writeContract.ts:241:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)
    at async main (/Users/sanchaymittal/github/polybook/orchestrator/src/scripts/lp-provision.ts:256:27) {
  cause: TransactionExecutionError: Execution reverted with reason: Out of gas: gas required exceeds allowance: 30000000.
  
  Request Arguments:
    from:  0x70997970C51812dc3A010C7d01b50e0d17dc79C8
    to:    0x610178dA211FEF7D417bC0e6FeD39F05609AD788
    data:  0x72ce42750000000000000000000000002279b7a0a67db372996a5fab50d91eaa73d2ebe60000000000000000000000000000000000000000000000000000000000000000d9116a0d7566d8c6d1e5914fcc328bdf0db42a4c1b9a4d7c9ccf1ebbbb66e3d500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000003b9aca00000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002
  
  Details: Out of gas: gas required exceeds allowance: 30000000
  Version: viem@2.45.1
      at getTransactionError (/Users/sanchaymittal/github/polybook/orchestrator/node_modules/.pnpm/viem@2.45.1_typescript@5.9.3/node_modules/viem/utils/errors/getTransactionError.ts:44:10)
      at sendTransaction (/Users/sanchaymittal/github/polybook/orchestrator/node_modules/.pnpm/viem@2.45.1_typescript@5.9.3/node_modules/viem/actions/wallet/sendTransaction.ts:366:11)
      ... 2 lines matching cause stack trace ...
      at async main (/Users/sanchaymittal/github/polybook/orchestrator/src/scripts/lp-provision.ts:256:27) {
    cause: ExecutionRevertedError: Execution reverted with reason: Out of gas: gas required exceeds allowance: 30000000.
    
    Details: Out of gas: gas required exceeds allowance: 30000000
    Version: viem@2.45.1
        at getNodeError (/Users/sanchaymittal/github/polybook/orchestrator/node_modules/.pnpm/viem@2.45.1_typescript@5.9.3/node_modules/viem/utils/errors/getNodeError.ts:82:12)
        at <anonymous> (/Users/sanchaymittal/github/polybook/orchestrator/node_modules/.pnpm/viem@2.45.1_typescript@5.9.3/node_modules/viem/utils/errors/getTransactionError.ts:37:19)
        at getTransactionError (/Users/sanchaymittal/github/polybook/orchestrator/node_modules/.pnpm/viem@2.45.1_typescript@5.9.3/node_modules/viem/utils/errors/getTransactionError.ts:43:5)
        at sendTransaction (/Users/sanchaymittal/github/polybook/orchestrator/node_modules/.pnpm/viem@2.45.1_typescript@5.9.3/node_modules/viem/actions/wallet/sendTransaction.ts:366:11)
        at process.processTicksAndRejections (node:internal/process/task_queues:103:5)
        at async writeContract.internal (/Users/sanchaymittal/github/polybook/orchestrator/node_modules/.pnpm/viem@2.45.1_typescript@5.9.3/node_modules/viem/actions/wallet/writeContract.ts:230:14)
        at async main (/Users/sanchaymittal/github/polybook/orchestrator/src/scripts/lp-provision.ts:256:27) {
      details: 'Out of gas: gas required exceeds allowance: 30000000',
      docsPath: undefined,
      metaMessages: undefined,
      shortMessage: 'Execution reverted with reason: Out of gas: gas required exceeds allowance: 30000000.',
      version: '2.45.1',
      [cause]: [EstimateGasExecutionError]
    },
    details: 'Out of gas: gas required exceeds allowance: 30000000',
    docsPath: undefined,
    metaMessages: [
      'Request Arguments:',
      '  from:  0x70997970C51812dc3A010C7d01b50e0d17dc79C8\n' +
        '  to:    0x610178dA211FEF7D417bC0e6FeD39F05609AD788\n' +
        '  data:  0x72ce42750000000000000000000000002279b7a0a67db372996a5fab50d91eaa73d2ebe60000000000000000000000000000000000000000000000000000000000000000d9116a0d7566d8c6d1e5914fcc328bdf0db42a4c1b9a4d7c9ccf1ebbbb66e3d500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000003b9aca00000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002'
    ],
    shortMessage: 'Execution reverted with reason: Out of gas: gas required exceeds allowance: 30000000.',
    version: '2.45.1'
  },
  details: 'Out of gas: gas required exceeds allowance: 30000000',
  docsPath: '/docs/contract/writeContract',
  metaMessages: [
    'Request Arguments:',
    '  from:  0x70997970C51812dc3A010C7d01b50e0d17dc79C8\n' +
      '  to:    0x610178dA211FEF7D417bC0e6FeD39F05609AD788\n' +
      '  data:  0x72ce42750000000000000000000000002279b7a0a67db372996a5fab50d91eaa73d2ebe60000000000000000000000000000000000000000000000000000000000000000d9116a0d7566d8c6d1e5914fcc328bdf0db42a4c1b9a4d7c9ccf1ebbbb66e3d500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000003b9aca00000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002',
    ' ',
    'Contract Call:',
    '  address:   0x610178dA211FEF7D417bC0e6FeD39F05609AD788\n' +
      '  function:  splitPosition(address collateralToken, bytes32 parentCollectionId, bytes32 conditionId, uint256[] partition, uint256 amount)\n' +
      '  args:                   (0x2279B7A0a67DB372996a5FaB50D91eAA73d2eBe6, 0x0000000000000000000000000000000000000000000000000000000000000000, 0xd9116a0d7566d8c6d1e5914fcc328bdf0db42a4c1b9a4d7c9ccf1ebbbb66e3d5, ["1","2"], 1000000000)\n' +
      '  sender:    0x70997970C51812dc3A010C7d01b50e0d17dc79C8'
  ],
  shortMessage: 'Execution reverted with reason: Out of gas: gas required exceeds allowance: 30000000.',
  version: '2.45.1',
  abi: [
    {
      name: 'splitPosition',
      type: 'function',
      inputs: [Array],
      outputs: [],
      stateMutability: 'nonpayable'
    },
    {
      name: 'getCollectionId',
      type: 'function',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      name: 'getPositionId',
      type: 'function',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'pure'
    },
    {
      name: 'balanceOf',
      type: 'function',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    { name: 'PositionSplit', type: 'event', inputs: [Array] },
    {
      name: 'prepareCondition',
      type: 'function',
      inputs: [Array],
      outputs: [],
      stateMutability: 'nonpayable'
    },
    {
      name: 'getOutcomeSlotCount',
      type: 'function',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      name: 'getConditionId',
      type: 'function',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'pure'
    }
  ],
  args: [
    '0x2279B7A0a67DB372996a5FaB50D91eAA73d2eBe6',
    '0x0000000000000000000000000000000000000000000000000000000000000000',
    '0xd9116a0d7566d8c6d1e5914fcc328bdf0db42a4c1b9a4d7c9ccf1ebbbb66e3d5',
    [ 1n, 2n ],
    1000000000n
  ],
  contractAddress: '0x610178dA211FEF7D417bC0e6FeD39F05609AD788',
  formattedArgs: undefined,
  functionName: 'splitPosition',
  sender: '0x70997970C51812dc3A010C7d01b50e0d17dc79C8'
}
